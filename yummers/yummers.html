<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  <link rel="icon" type="image/x-icon" href="../common_assets/favicon.ico"/>
  <title>oSzoukaua's Yummers</title>
  <link href="https://fonts.googleapis.com/css2?family=Space+Mono&display=swap" rel="stylesheet"/>
  <style>

    html, body {
        height: 100%;
        margin: 0;
        padding: 0;
        font-family: "Space Mono", monospace;
        background-color: black;
        color: white;
        display: flex;
        flex-direction: column;
        align-items: center;
        min-height: 100vh;
    }

    .btn {
        text-shadow: -2px -2px 0 black, 2px -2px 0 black, -2px 2px 0 black, 2px 2px 0 black;
        padding: 0.5em 1em;
        border: 1px solid white;
        background: transparent;
        color: white;
        cursor: pointer;
        border-radius: 3px;
        flex: 1;
        position: relative;
        overflow: hidden;
        text-decoration: none;
        z-index: 1;
        transition: all 0.3s ease-in-out;
    }

    .btn:focus {
        outline: none;
        box-shadow: 0 0 0 2px white;
    }

    .btn:hover::before {
        content: "";
        position: absolute;
        top: -1px;
        left: -1px;
        right: -1px;
        bottom: -1px;
        z-index: -1;
        background: repeating-linear-gradient(45deg, white 0px, white 4px, transparent 4px, transparent 8px);
        background-size: 11.314px 11.314px;
        animation: scrollStripes 1s linear infinite;
        border-radius: 3px;
    }

    @keyframes scrollStripes {
        0% {
            background-position: 0 0;
        }
        100% {
            background-position: -28.285px 28.285px;
        }
    }

    .logo {
        margin-top: 30px;
    }

    .logo img {
        width: 160px;
        height: auto;
    }

    header {
        font-size: 2em;
        margin: 20px 0;
        font-weight: bold;
        text-align: center;
        text-transform: uppercase;
        letter-spacing: 5px;
    }

    hat {
        width: 90%;
        max-width: 900px;
        flex: 1;
        display: flex;
        flex-direction: column;
        align-items: center;
    }

    shoe {
        font-size: 0.9em;
        text-align: center;
        padding: 20px;
    }

    shoe a {
        color: white;
        text-decoration: underline;
    }
	
	.hide {
        display: none;
    }

    .product-gallery {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 20px;
      margin-top: 30px;
    }

    .product-gallery img {
      width: 200px;
      height: 200px;
      object-fit: cover;
      border-radius: 8px;
      border: 2px solid white;
      transition: transform 0.3s ease;
    }

	.card-gallery {
  display: flex;
  flex-wrap: nowrap;
  overflow-x: auto;
  gap: 20px;
  padding: 20px;
  width: 100%;
}


    .card {
      perspective: 1000px;
      cursor: pointer;
    }

    .card-inner {
      position: relative;
      transform-style: preserve-3d;
      transition: transform 0.3s ease;
      border: 3px solid #444;
      border-radius: 6px;
      overflow: hidden;
	  
    }

    .card-inner img {
      width: 90%;
      height: auto;
      display: block;
      margin: 1em auto;
    }

    .card-title {
      position: absolute;
      bottom: 10px;
      left: 10px;
      right: 10px;
      padding: 10px 10px 0px 10px;
      color: white;
      text-align: center;
      font-size: 1.2em;
      font-weight: bold;
      letter-spacing: 1px;
      z-index: 2;
      text-shadow:
        -2px -2px 0 black,
         2px -2px 0 black,
        -2px  2px 0 black,
         2px  2px 0 black;
	  transition: color 0.3s ease, transform 0.3s ease, opacity 0.3s ease;
    }

	.card-inner:hover .card-title {
	color: #000;
	transform: translateY(20px);
	}

    .card-inner:hover .card-title {
      opacity: 0;
    }

    .sheen {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      border-radius: 6px;
      border: 3px solid transparent;
      z-index: 2;
      mask-composite: exclude;
      -webkit-mask-composite: destination-out;
      mix-blend-mode: screen;
      opacity: 0;
	  pointer-events: none;
    }

    .card-inner:hover .sheen {
      opacity: 1;
    }
	
	.card-author {
	  position: relative;
	  opacity: 0.2;
	  display: inline-block; /* or block, depending on layout */
	  transform: rotate(-90deg) translate(3em, -2em);
	  transform-origin: center center;
	}

	.subheader {
	  font-size: 1.2em;  /* Adjust the font size as needed */
	  color: lightgray;
	  text-align: center;
	}

	.btn-fill-horizontal {
	  display: flex;
	  align-items: center;
	  justify-content: center; /* Optional: center horizontally */

	  width: 100%;
	  max-height: 2em;            /* Enough for 1em text + padding */

	  padding: 0 1.2em;         /* Only horizontal padding */
	  overflow: hidden;
	}
	
	mother {
    display: none;
}

  </style>
<mother>
  <hat>
    <div class="logo">
    <a href="../index.html" data-append-params> <img src="../common_assets/logo_watermark_high.png" alt="oSzoukaua's logo" /> </a>
    </div>
    <header>Yummers</header>
	<div class="subheader">Some of my personal favourites!</div>
	<div id="card-gallery" class="card-gallery">
    </div>
	<a href="../webstore/webstore.html" data-append-params class="btn btn-fill-horizontal" rel="noopener noreferrer">Go to webstore</a>
  </hat>


  <shoe>
    <p>⊗ oSzoukaua - <a href="https://ko-fi.com/oszoukaua">Support me!</a> - <a href="../contact/contact.html?hidden=general-email,stickers-email,general-discord,general-bluesky,webstore-email" data-append-params>Contact</a> </p>
  </shoe>
  </mother>
<script>
    const stickers = [
      { title: "Nothing Soda", image: "soda_1.png", url: "../webstore/webstore.html?tag=Yummers&open=1", author: "oSzoukaua" },
	  { title: "Nothing Cream Soda", image: "soda_2.png", url: "../webstore/webstore.html?tag=Yummers&open=2", author: "oSzoukaua" },
	  { title: "Gnaw Bars", image: "bar_1.png", url: "../webstore/webstore.html?tag=Yummers&open=3", author: "oSzoukaua" },
    ];

function createStickerCard(sticker) {
  const wrapper = document.createElement('div');
  wrapper.className = 'card';
  wrapper.style.cursor = 'pointer';
  wrapper.title  = `Open ${sticker.title}`;

  const inner = document.createElement('div');
  inner.className = 'card-inner';

  const img = document.createElement('img');
  img.src = sticker.image;
  img.alt = sticker.title;

  const title = document.createElement('div');
  title.className = 'card-title';
  title.innerText = sticker.title;

  const sheen = document.createElement('div');
  sheen.className = 'sheen';

  const author = document.createElement('div');
  author.className = 'card-author';
  author.innerText = sticker.author;

  inner.append(img, title, sheen, author);
  wrapper.appendChild(inner);

wrapper.addEventListener('click', () => {
  const tempLink = document.createElement('a');
  tempLink.href = sticker.url;
  tempLink.setAttribute('data-append-params', '');

  document.body.appendChild(tempLink);

  appendUrlParamsToLinks();

  window.open(tempLink.href, '_self', 'noopener');

  tempLink.remove();
});


  // your existing tilt + sheen logic
  wrapper.addEventListener('mousemove', e => {
    const rect = wrapper.getBoundingClientRect();
    const x = e.clientX - rect.left;
    const y = e.clientY - rect.top;
    const cx = rect.width / 2;
    const cy = rect.height / 2;
    const dx = (x - cx) / cx;
    const dy = (y - cy) / cy;
    const maxTilt = 25;
    const rX = Math.max(Math.min(dy * -30, maxTilt), -maxTilt);
    const rY = Math.max(Math.min(dx *  30, maxTilt), -maxTilt);
    inner.style.transform = `rotateX(${rX}deg) rotateY(${rY}deg)`;
    const angle = Math.atan2(y - cy, x - cx) * (180/Math.PI);
    inner.style.setProperty('--sheen-angle', `${angle + 90}deg`);
    const dist = Math.sqrt(dx*dx + dy*dy);
    const opacity = Math.max(dist * 0.3 - 0.1, 0);
    const offset  = `${Math.min(dist * 70)}%`;
    sheen.style.background = `
      linear-gradient(var(--sheen-angle), rgba(255,255,255,0) 40%, rgba(255,255,255,0.1) 90%),
      linear-gradient(calc(var(--sheen-angle) + 180deg), rgba(255,255,255,0) 10%, rgba(255,255,255,${opacity}) ${offset}, rgba(255,255,255,0) 30%)
    `;
  });

  wrapper.addEventListener('mouseenter', () => {
    sheen.style.opacity = 1;
  });
  wrapper.addEventListener('mouseleave', () => {
    inner.style.transform = 'rotateX(0deg) rotateY(0deg)';
    sheen.style.opacity = 0;
  });

  return wrapper;
}


  const gallery = document.getElementById('card-gallery');
  stickers.forEach(sticker => {
    gallery.appendChild(createStickerCard(sticker));
	
  });
  
  function createModal(title, message, buttonText, callback) {
    const modal = document.createElement('div');
    modal.style = 'position:center;width:50%;height:100%;background:rgba(0,0,0,0.9);backdrop-filter: blur(10px);color:white;display:flex;justify-content:center;align-items:center;z-index:10000;';

    const modalContent = document.createElement('div');
    modalContent.style = 'text-align:center;padding:30px;border:2px solid white;background:black;border-radius: 6px;';

    const modalTitle = document.createElement('h2');
    modalTitle.textContent = title;
    modalContent.appendChild(modalTitle);

    const modalMessage = document.createElement('p');
    modalMessage.textContent = message;
    modalContent.appendChild(modalMessage);

    const modalButton = document.createElement('button');
    modalButton.textContent = buttonText;
    modalButton.classList.add('btn');
    modalButton.onclick = function() {
        callback();
        document.body.removeChild(modal);
    };
    modalContent.appendChild(modalButton);

    modal.appendChild(modalContent);

    document.body.appendChild(modal);
}

function createAgeModal() {
    const params = new URLSearchParams(window.location.search);
    const motherDiv = document.querySelector('mother'); // ✅ Correct for custom tag

    if (params.get('age_modal') !== 'true') {
        if (motherDiv) motherDiv.style.display = 'none';

        createModal(
            "Are you over 18?",
            "This site contains content aimed at people aged 18 and older. By pressing \"I Agree\", you confirm that you are at least 18 years old and consent to viewing content intended for adults.",
            "I Agree",
            function () {
                params.set('age_modal', 'true');
                const newParams = params.toString();
                const newUrl = window.location.pathname + '?' + newParams;
                window.location.href = newUrl;
            }
        );
    } else {
        if (motherDiv) motherDiv.style.display = 'contents'; // or ''
        appendUrlParamsToLinks();
    }
}

function appendUrlParamsToLinks() {
    const currentQuery = window.location.search;
    if (!currentQuery) return;

    const excludeParams = ['hidden']; // Add any keys you want to exclude
    const currentParams = new URLSearchParams(currentQuery);

    // Remove excluded params
    excludeParams.forEach(param => currentParams.delete(param));

    const paramString = currentParams.toString();
    if (!paramString) return;

    // Only target links with the data-append-params attribute
    document.querySelectorAll("a[data-append-params][href]").forEach(link => {
        const url = new URL(link.href, window.location.origin);
        const linkParams = new URLSearchParams(url.search);

        // Append current params if not already present
        currentParams.forEach((value, key) => {
            if (!linkParams.has(key)) {
                linkParams.set(key, value);
            }
        });

        url.search = linkParams.toString();
        link.href = url.toString();
    });
}

function toggleElementsBasedOnQuery() {

    const params = new URLSearchParams(window.location.search);
    const hiddenIds = params.get('hidden') ? params.get('hidden').split(',') : [];


    if (hiddenIds.length > 0) {

        const elements = document.querySelectorAll('[id]');

        elements.forEach((element) => {
            if (hiddenIds.includes(element.id)) {
                element.classList.add('hide');
            }
        });
    }
}

window.onload = function() {
    createAgeModal();
    toggleElementsBasedOnQuery();
};
</script>
</html>
